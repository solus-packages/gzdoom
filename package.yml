name       : gzdoom
version    : 3.7.1
release    : 10
source     :
    - git|https://github.com/coelckers/gzdoom.git : g3.7.1
license    :
    - BSD-3-Clause
    - GPL-3.0-or-later
    - LGPL-3.0-or-later
    - MIT
component  : games.action
summary    : A port of id Software's original Linux Doom source code to Win32 and Linux
description: |
    A port of id Software's original Linux Doom source code to Win32 and Linux
builddeps  :
    - pkgconfig(fluidsynth)
    - pkgconfig(gl)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(libjpeg)
    - pkgconfig(openal)
    - pkgconfig(sdl2)
    - pkgconfig(sndfile)
    - bzip2-devel
    - imagemagick
    - wildmidi-devel
rundeps    :
    - fluidsynth
setup      : |
    %cmake_ninja
build      : |
    %ninja_build
install    : |
    install -d $installdir/usr/share/gzdoom
    install -m00644 solusBuildDir/*.pk3 $installdir/usr/share/gzdoom
    install -m00644 soundfont/gzdoom.sf2 $installdir/usr/share/gzdoom/gzdoom.sf2
    chmod -R 00644 $installdir/usr/share/gzdoom
    install -m00755 solusBuildDir/gzdoom $installdir/usr/share/gzdoom/gzdoom
    install -d $installdir/usr/share/pixmaps
    convert 'src/win32/icon1.ico[8]' $installdir/usr/share/pixmaps/gzdoom.png
    install -Dm00644 $pkgfiles/gzdoom.desktop $installdir/usr/share/applications/gzdoom.desktop
    install -d $installdir/usr/bin/
    ln -s /usr/share/gzdoom/gzdoom $installdir/usr/bin/gzdoom
